# WARP.md

This file provides guidance to WARP (warp.dev) when working with code in this repository.

## Project Overview

This is a Laravel 12 application with React frontend using Inertia.js for seamless SPA-like interactions. The project follows a modern full-stack architecture with TypeScript, Tailwind CSS v4, and includes a comprehensive authentication system with user settings.

## Key Technologies & Architecture

- **Backend**: Laravel 12 with PHP 8.2+
- **Frontend**: React 19 with TypeScript
- **Bridge**: Inertia.js v2 for server-side rendering and client-side navigation
- **Styling**: Tailwind CSS v4 with custom UI components (Radix UI primitives)
- **Build System**: Vite 7 with Laravel integration
- **Testing**: Pest PHP for backend tests
- **Route Management**: Laravel Wayfinder for type-safe route generation

## Development Commands

### Essential Commands
```bash
# Start development environment (runs Laravel server, queue worker, and Vite)
composer dev

# Start with SSR support
composer dev:ssr

# Build production assets
npm run build

# Run tests
composer test
php artisan test

# Run single test file
php artisan test tests/Feature/Auth/AuthenticationTest.php

# Type checking
npm run types

# Linting and formatting
npm run lint
npm run format
npm run format:check
```

### Laravel-specific Commands
```bash
# Generate application key (first-time setup)
php artisan key:generate

# Run database migrations
php artisan migrate

# Clear caches during development
php artisan config:clear
php artisan route:clear
php artisan view:clear

# View all routes
php artisan route:list
```

## Architecture Overview

### Frontend Structure
- **Components**: Located in `resources/js/components/`
  - `ui/` - Reusable UI components based on Radix UI
  - App-specific components (header, sidebar, navigation)
- **Layouts**: `resources/js/layouts/` - Page layout templates
- **Pages**: `resources/js/pages/` - Inertia page components
- **Types**: `resources/js/types/index.d.ts` - TypeScript definitions
- **Routes**: `resources/js/routes/` - Auto-generated by Wayfinder

### Backend Structure
- **Controllers**: `app/Http/Controllers/`
  - `Auth/` - Authentication-related controllers
  - `Settings/` - User settings management
- **Models**: `app/Models/` - Eloquent models
- **Routes**: 
  - `routes/web.php` - Main application routes
  - `routes/auth.php` - Authentication routes
  - `routes/settings.php` - Settings routes

### Type-Safe Route Generation
Routes are auto-generated by Laravel Wayfinder into `resources/js/routes/index.ts`. This provides:
- Type-safe route definitions with IntelliSense
- URL generation: `dashboard().url`
- HTTP method helpers: `dashboard().get`
- Form helpers: `dashboard().form`

**Important**: After adding new routes, run `npm run build` or start the dev server to regenerate route types.

### UI Component System
The project uses a custom UI component library built on Radix UI primitives:
- Components are located in `resources/js/components/ui/`
- Styled with Tailwind CSS using `class-variance-authority` for variants
- Theme system with light/dark mode support
- Consistent design tokens through CSS variables

### Authentication & Authorization
- Full authentication system with registration, login, password reset
- Email verification support
- User settings pages for profile and password management
- Middleware-protected routes (`auth`, `verified`)

## Testing

### PHP Tests (Pest)
- Feature tests: `tests/Feature/` - End-to-end functionality testing
- Unit tests: `tests/Unit/` - Individual component testing
- Database: Uses SQLite in-memory for testing
- Pest configuration in `tests/Pest.php`

### Running Tests
```bash
# Run all tests
php artisan test

# Run specific test suite
php artisan test tests/Feature/Auth/

# Run with coverage (if configured)
php artisan test --coverage

# Pest-specific syntax
./vendor/bin/pest
```

## Development Workflow

### Adding New Features
1. Create Laravel routes in appropriate route file
2. Create/update controllers in `app/Http/Controllers/`
3. Build frontend components in `resources/js/components/`
4. Create Inertia page components in `resources/js/pages/`
5. Run `npm run build` to generate updated route types
6. Write tests in `tests/Feature/` or `tests/Unit/`

### Working with Inertia
- Page components receive props from Laravel controllers
- Use `usePage()` hook to access shared data
- Navigate with `router.visit()` or `<Link>` component
- Forms use Inertia's `useForm()` hook for validation

### Theme Development
- Appearance settings are in `resources/js/components/appearance-*`
- Theme switching uses `use-appearance.tsx` hook
- CSS variables defined for consistent theming
- Dark/light mode toggle in app header

### Database Changes
- Create migrations: `php artisan make:migration`
- Run migrations: `php artisan migrate`
- Rollback: `php artisan migrate:rollback`
- Use factories and seeders for test data

## Configuration Files
- `composer.json` - PHP dependencies and scripts
- `package.json` - Node.js dependencies and scripts
- `vite.config.ts` - Vite build configuration
- `tsconfig.json` - TypeScript configuration with path mapping
- `eslint.config.js` - ESLint rules for React/TypeScript
- `components.json` - shadcn/ui component configuration (if present)

## Common Patterns

### Page Components
```tsx
// resources/js/pages/example.tsx
import AppLayout from '@/layouts/app-layout';
import { Head } from '@inertiajs/react';

export default function ExamplePage() {
    return (
        <AppLayout>
            <Head title="Example" />
            {/* Page content */}
        </AppLayout>
    );
}
```

### Form Handling
```tsx
import { useForm } from '@inertiajs/react';

const { data, setData, post, processing, errors } = useForm({
    name: '',
    email: '',
});

const submit = (e) => {
    e.preventDefault();
    post('/endpoint');
};
```

### Route Usage
```tsx
import { dashboard } from '@/routes';

// Navigate to dashboard
router.visit(dashboard().url);

// Link component
<Link href={dashboard().url}>Dashboard</Link>
```

## File Watching & Hot Reload
The development setup includes:
- Vite hot module replacement for instant frontend updates
- Laravel's auto-reload for backend changes
- Concurrent running of all necessary services via `composer dev`

## Path Aliases
- `@/*` maps to `resources/js/*` (configured in `tsconfig.json`)
- Use absolute imports: `import { Button } from '@/components/ui/button'`